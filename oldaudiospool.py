#!/usr/bin/python# -*- coding: utf-8 -*-import feedparserimport osdef getmp3files(url,plist=''):        data = feedparser.parse(url)     currentfiles = os.listdir(os.path.expanduser('~/Music'))        for item in data['items']:        if item.has_key('enclosure'):            if item['enclosure']['type'] == 'audio/mpeg':                filename =  item['enclosure']['url'].split("/")[-1]                if 1: #not filename in currentfiles:                    if plist == '':                        fi,fo = os.popen2('osascript')                        fi.write('tell application "iTunes"\rmake new playlist\rend tell\r')                        fi.close()                        plist = fo.readline().rstrip()                        fo.close()                                                scriptcmd = 'tell application "iTunes"\rset name of %s to "%s"\rend tell\r' % (plist,data['channel']['title'])                        fi = os.popen('osascript','w')                        fi.write(scriptcmd)                        fi.close()                    os.popen('''cd ~/Music/;curl -O %s''' % (item['enclosure']['url'])).close()                    fi=os.popen('osascript','w')                    scriptcmd = 'tell application "iTunes"\rset newfile to  (path to the "Âµdoc" as string) & "%s"\radd newfile to %s\rend tell\r' % (filename,plist)                    fi.write(scriptcmd)                    fi.close()    return plistif __name__ == '__main__':    import sys    if len(sys.argv)>1:        feed = sys.argv[1]    else:        feed = 'http://cyber.law.harvard.edu/blogs/audio/lydonRss.xml'    if len(sys.argv)>2:        playlist = sys.argv[2]    else:        playlist = ''    getmp3files(feed,playlist)